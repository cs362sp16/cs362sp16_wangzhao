#!/bin/bash

echo " current at :"
pwd
echo " the first and the second are for the dir"
echo " the third for the seed"
echo " run as: filename  dir1  dir2 seed"

home=`pwd`

cd $1

pwd

make testdominion

rm diff1.out

./testdominion $3 >> diff1.out



mv diff1.out $home

gcov -f -b dominion.c 

cd $2

pwd

make testdominion	

rm diff2.out

./testdominion $3 >> diff2.out

mv diff2.out $home
gcov -f -b dominion.c 

diff diff1.out diff2.out > diff3.out
if [ ! -s diff3.out ]	
	then
		echo "TEST PASSED"
	else
		echo "TEST FAILED"
fi
